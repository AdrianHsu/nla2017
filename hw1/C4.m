% graph.txt
% A = [3 -1 -1 -1; -1 2 -1 0; -1 -1 3 -1; -1 0 -1 2];
% A = [7 4 1; 4 4 4; 1 4 7];
% A = [1 2; 2 1];

A = [-4 14 0; -5 13 0; -1 0 2];
x = [1 1 1]';
tol = 1e-8;
N = 100;
n = length(x);

B1 = A;
[r1, xsol]=pm(B1,ones(3,1),10^(-8),100);

u1=xsol;
x1=B1(1,1:3)'/(r1*u1(1));
v1=u1;
B2=B1-r1*u1*x1';

[r2, xsol]=pm(B2,ones(3,1),10^(-8),100);

u2=xsol;
x2=B2(2,1:3)'/(r2*u2(2));
v2=(r2-r1)*u2+r1*(x1'*u2)*u1;
B3=B2-r2*u2*x2';

[r3, xsol]=pm(B3,ones(3,1),10^(-8),100);

u3=xsol;
v3=(r3-r2)*u3+r2*(x2'*u3)*u2;
[r1 r2 r3]
[A*v1-r1*v1 A*v2-r2*v2 A*v3-r3*v3]
